                                      Предоставляю домашнюю работу №3 по конфигурационному управлению

                                                           Вариант №16
                                                           
Задание №3

  Разработать инструмент командной строки для учебного конфигурационного
языка, синтаксис которого приведен далее. Этот инструмент преобразует текст из
входного формата в выходной. Синтаксические ошибки выявляются с выдачей
сообщений.

  Входной текст на учебном конфигурационном языке принимается из
файла, путь к которому задан ключом командной строки. Выходной текст на
языке toml попадает в файл, путь к которому задан ключом командной строки.

    Словари:

struct {

 имя = значение,

 имя = значение,
 
 имя = значение,

 ...
 
}

    Имена:

[a-zA-Z][_a-zA-Z0-9]*

    Значения:

• Числа.

• Строки.

• Словари.

    Строки:

"Это строка"

  Объявление константы на этапе трансляции:

set имя = значение;

  Вычисление константы на этапе трансляции:

?(имя)

  Результатом вычисления константного выражения является значение.
  
Все конструкции учебного конфигурационного языка (с учетом их
возможной вложенности) должны быть покрыты тестами. Необходимо показать 3
примера описания конфигураций из разных предметных областей




   **Пошаговая структура инструмента:**

Чтение файла с входным текстом.

Проверка синтаксиса на соответствие правилам.

Замена и обработка констант в выражениях.

Преобразование в формат TOML.

Вывод ошибок, если они обнаружены.

Запись результата в выходной файл.




Установите библиотеку toml с помощью следующей команды:

    pip install toml
Если у вас есть файл requirements.txt, он должен включать toml. Перезапустите установку зависимостей:

    pip install -r requirements.txt

Запуск

    python config_to_toml.py --input=input_basic.txt --output=output_basic.toml
.

    python config_to_toml.py --input=input_nested.txt --output=output_nested.toml
.

    python config_to_toml.py --input=input_complex.txt --output=output_complex.toml

Проверка тестов

![image](https://github.com/user-attachments/assets/7212b2a1-294d-473c-bac7-e0a12349aa06)

![image](https://github.com/user-attachments/assets/134c82ca-cc87-46a4-bbe8-6cda0f97554e)

Базовый запуск тестов

    python -m unittest test_config_to_toml.py

Запуск тестов

![image](https://github.com/user-attachments/assets/c8e24f8d-58c6-4b02-8447-e5e948ec9307)

    python -m unittest discover -v

О сделанной работе:

Код config_to_toml.py:
Описание:

Основная функция: Конвертирует конфигурационные данные из пользовательского формата в формат TOML.
Функции:

resolve_value: Парсит значения (строки, числа, булевы значения, массивы и словари).

parse_array: Разбирает массивы, поддерживает вложенные массивы и структуры.

parse_struct: Парсит словари (включая вложенные структуры).

parse_config: Обрабатывает весь конфигурационный файл, поддерживает глобальные ключи, структуры и константы.

generate_toml: Преобразует разобранные данные в формат TOML с поддержкой вложенных секций.

Функционал:

Чтение конфигурационного файла, парсинг данных, генерация и запись TOML-файла.

Обрабатывает структуры из файлов вроде:

input_basic.txt: Простые пары ключ-значение (без вложенности)​

input_nested.txt: Вложенные словари, такие как server и database​

input_complex.txt: Сложные данные с константами, массивами и вложенными структурам


Код test_config_to_toml.py:
Описание:

Основная функция: Тестирует функциональность кода config_to_toml.py с использованием библиотеки unittest.

Функции:

test_resolve_value: Проверяет преобразование строк, чисел, булевых значений, массивов и словарей в Python-объекты.

test_parse_array: Тестирует разбор массивов, включая вложенные структуры.

test_parse_struct: Проверяет разбор сложных структур с вложенностями.

test_parse_config: Валидирует корректность разбора всего файла конфигурации.

test_generate_toml: Проверяет правильность генерации TOML-файла из разобранных данных.

test_integration: Интеграционный тест полного цикла: разбор конфигурации и генерация TOML.

Функционал:

Убедиться, что код корректно обрабатывает входные данные из файлов (basic, nested, complex) и генерирует корректный TOML-вывод.

Проверяет результаты работы функций, чтобы избежать ошибок, таких как пропуск секций или неправильный формат TOML.

    input_basic.txt

Что делает код:

Использует parse_config, чтобы обработать пары ключ-значение, определённые с помощью set.

    input_nested.txt

Что делает код:

Использует parse_config, чтобы обработать struct и разобрать вложенные словари:

server: Включает параметры хоста, порта и SSL.

database: Содержит параметры базы данных, включая вложенный словарь tables.

    input_complex.txt

Что делает код:

Обрабатывает константу set app_name = "MyApp";, добавляя её в итоговый результат как глобальный параметр.

Разбирает сложную структуру с вложенными секциями:

features: Содержит логические значения и массив.

metadata: Содержит вложенный словарь repository и массив contributors.

settings: Содержит вложенный словарь notifications и массив languages.


  !!**В заключение скажу,что было сделано 3 теста,проект полностью поддерживается.**!!
